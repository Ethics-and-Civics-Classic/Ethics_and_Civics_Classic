###################################
# Origin Events
# Vanilla Written by Henrik Thyrwall et al
###################################

@scionRewardTimer = 9000 # minimum time between rewards from the Scion, in days (currently 25 years)
@scionRewardTimerDelay = 9000 # randomized delay added to 'scionRewardTimer', in days (currently 25 years)
@scionRefusalsCap = 2 # number of times a Scion may refuse their Overlord before they think it rude

namespace = primitive_origin

# 0-54,200â€“250:	"Scion"
# 55-59			"Common Ground" & "Hegemon"
# 60-99:		"Doomsday"
# 100-109:		"Lost Colony"
# 110-150:		"Broken Shackles" & "Payback"

########
# Obelisk 
########

# Spawns Cloaked MSI Observation Post
country_event = {
	id = primitive_origin.110
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		every_playable_country = { 
			limit = { has_origin = origin_slavers }
			create_fleet = {
				name = "MSI Observation Post"
				effect = {
					set_owner = prev
					create_ship = {
						name = "Obelisk Observer"
						design = "NAME_Obervation_Station"
					}
					set_location = root.capital_scope
					set_cloaking_active = yes
				}
			}
		}
	}

}



# Spawn Broken Shackles for Payback
country_event = {
	id = primitive_origin.112
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				count_country = {
					limit = {
						is_primitive = yes
					}
					count < 3
				}
			}
			capital_scope = {
				while = {
					count = 3
					spawn_system = {
						min_distance = 10
						max_distance = 100
						initializer = pre_ftl_init_01
						hyperlane = no
						is_discovered = no
					}
					add_extra_hyperlane_to_spawned_system_effect = yes
					add_extra_hyperlane_to_spawned_system_effect = yes
				}
			}
		}
		if = {
			limit = {
				any_playable_country = {
					has_origin = origin_broken_shackles
				}
			}
		}
		else = {
			uplift_pre_ftl_with_origin_effect = {
				ORIGIN = origin_broken_shackles
			}
			set_country_flag = victims_of_@event_target:MSI_country
		}
	}
}

# Spawn Payback for Broken Shackles
country_event = {
	id = primitive_origin.113
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_playable_country = {
					has_origin = origin_payback
				}
			}
		}
		else = {
			uplift_pre_ftl_with_origin_effect = {
				ORIGIN = origin_payback
			}
			set_country_flag = victims_of_@event_target:MSI_country
		}
	}
}

## First Contact with MSI

# Comms Study 1
first_contact_event = {
	id = primitive_origin.114
	title = primitive_origin.114.name
	desc = primitive_origin.114.desc
	picture = GFX_evt_obelisk_tourists
	show_sound = evn_fc_slaver_empire
	is_triggered_only = yes
	first_contact = yes

	immediate = {
		set_first_contact_flag = seen_aliens
		set_name = PrimPlayer_the_obelisk
		set_site_progress_locked = yes
		owner = {
			set_country_flag = met_MSI
		}
	}

	after = {
		set_site_progress_locked = no
	}

	#option = {
	#	name = origin.5065.a
	#	owner = {
	#		add_modifier = {
	#			modifier = broken_shackles_MSI_contact_01
	#			days = 1800
	#		}
	#	}
	#	hidden_effect = {
	#		set_first_contact_stage = slavers_stage_2
	#	}
	#}
	
	option = {
		name = "primitive_origin.114.first_contact_proactive"	
		trigger = { 
			owner = {
				is_homicidal = no
				is_xenophobe = no
			}
		}
		owner = { set_policy = { policy = first_contact_protocol option = first_contact_proactive cooldown = yes } }
		hidden_effect = {
			set_first_contact_stage = slavers_stage_2
		}
	}
	
	option = {
		name = "primitive_origin.114.first_contact_cautious"	
		trigger = { owner = { is_homicidal = no } }
		owner = { set_policy = { policy = first_contact_protocol option = first_contact_cautious cooldown = yes } }
		hidden_effect = {
			set_first_contact_stage = slavers_stage_2
		}
	}
	
	option = {
		name = "primitive_origin.114.first_contact_attack_allowed"	
		trigger = { 
			owner = { 
				is_pacifist = no
				OR = {
					is_xenophile = no
					is_homicidal = yes
				}
			}
		}
		owner = { set_policy = { policy = first_contact_protocol option = first_contact_attack_allowed cooldown = yes } }
		hidden_effect = {
			set_first_contact_stage = slavers_stage_2
		}
	}
}

# Comms Study 2	#MSI Guarentees country
first_contact_event = {
	id = primitive_origin.115
	title = primitive_origin.115.name
	desc = primitive_origin.115.desc
	picture = GFX_evt_acquire_asset
	show_sound = evn_fc_slaver_empire
	is_triggered_only = yes
	first_contact = yes

	immediate = {
		set_site_progress_locked = yes
	}

	after = {
		set_site_progress_locked = no
	}

	option = {
		name = "primitive_origin.115.first_contact_proactive"	
		trigger = { 
			owner = {
				is_homicidal = no
				is_xenophobe = no
			}
		}
		from.from = { guarantee_country = { target = root.owner } }
		#from.from = { set_truce = { target = root.owner type = guarantee }
		owner = { 
			if = {
				limit = { NOT = { current_awareness_level = full } }
				set_awareness = 100
			}
			set_policy = { policy = first_contact_protocol option = first_contact_proactive cooldown = yes }  
		}
		hidden_effect = {
			set_first_contact_stage = slavers_finish
		}
	}
	
	option = {
		name = "primitive_origin.115.first_contact_cautious"	
		trigger = { owner = { is_homicidal = no } }
		from.from = { guarantee_country = { target = root.owner } }
		#from.from = { set_truce = { target = root.owner type = guarantee }
		owner = { 
			if = {
				limit = { NOT = { current_awareness_level = full } }
				set_awareness = 100
			}
			set_policy = { policy = first_contact_protocol option = first_contact_cautious cooldown = yes } 
			capital_scope = { 
				add_modifier = {
					modifier = culture_shock_diplomacy
					years = 20
				}
			}
		}
		hidden_effect = {
			set_first_contact_stage = slavers_finish
		}
	}
	
	option = {
		name = "primitive_origin.115.first_contact_attack_allowed"	
		trigger = { 
			owner = { 
				is_pacifist = no
				OR = {
					is_xenophile = no
					is_homicidal = yes
				}
			}
		}
		from.from = { guarantee_country = { target = root.owner } }
		#from.from = { set_truce = { target = root.owner type = guarantee }
		owner = { 
			if = {
				limit = { NOT = { current_awareness_level = full } }
				set_awareness = 100
			}
			set_policy = { policy = first_contact_protocol option = first_contact_attack_allowed cooldown = yes } 
			capital_scope = { 
				add_modifier = {
					modifier = culture_shock_diplomacy
					years = 20
				}
			}
		}
		hidden_effect = {
			set_first_contact_stage = slavers_finish
		}
	}
}

# Comms Study Finale
first_contact_event = {
	id = primitive_origin.116
	title = primitive_origin.116.name
	desc = primitive_origin.116.desc
	picture = GFX_evt_announcement
	show_sound = evn_fc_slaver_empire
	is_triggered_only = yes
	first_contact = yes

	immediate = {
		set_site_progress_locked = yes
	}

	after = {
		set_site_progress_locked = no
	}

	#option = {
	#	name = origin.5075.a
	#	owner = {
	#		if = {
	#			limit = {
	#				has_modifier = broken_shackles_MSI_contact_01
	#			}
	#			remove_modifier = broken_shackles_MSI_contact_01
	#		}
	#		add_modifier = {
	#			modifier = broken_shackles_MSI_contact_02
	#			days = 3600
	#		}
	#		add_opinion_modifier = {
	#			who = event_target:MSI_country
	#			modifier = contact_with_MSI_02
	#		}
	#	}
	#	finish_first_contact_effect = yes
	#	first_contact_inform_intel = yes
	#}
	
	option = {
		name = "primitive_origin.116.first_contact_proactive"	
		trigger = { 
			owner = { has_policy_flag = first_contact_proactive }
		}
		owner = { 
			if = { 
				limit = { has_paragon_dlc = yes }
				add_research_option = tech_xeno_linguistics 
			}
		}
		finish_first_contact_effect = yes
		first_contact_inform_intel = yes
	}
	
	option = {
		name = "primitive_origin.116.first_contact_cautious"	
		trigger = { 
			owner = { has_policy_flag = first_contact_cautious }
		}
		owner = { 
			if = { 
				limit = { has_paragon_dlc = yes }
				add_research_option = tech_xeno_linguistics 
			}
		}
		finish_first_contact_effect = yes
		first_contact_inform_intel = yes
	}
	
	option = {
		name = "primitive_origin.116.first_contact_attack_allowed"	
		trigger = { 
			owner = { has_policy_flag = first_contact_attack_allowed }
		}
		owner = { 
			if = { 
				limit = { has_paragon_dlc = yes }
				add_research_option = tech_xeno_linguistics 
			}
		}
		finish_first_contact_effect = yes
		first_contact_inform_intel = yes
	}
}
###################################
#	Civic Primitive Enthusiasts	  #
###################################

##Cog Note - Primitive Player Origins don't have ownership over any system at start
country_event = {
	id = primitive_origin.201
	hide_window = yes
	#fire_only_once = no

	is_triggered_only = yes
	
	trigger = { owner = { has_civic = civic_primitive_enthusiasts } }

	immediate = {
		capital_scope = { planet_event = { id = primitive_origin.202 } }
	}

}

#We can target the empire's capital_planet's System and do effect on neighbor worlds
planet_event = {
	id = primitive_origin.202
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		solar_system = {   
			random_neighbor_system = {
				limit = { 
					has_owner = no
					any_system_planet = { is_colonizable = yes } #Check for colonizable world
				}	
				random_system_planet = {
					limit = { 
						has_owner = no 
						is_colonizable = yes
					}
					planet_event = { id = primitive_origin.203 }
				}
			}
		}
	}
}

planet_event = {
	id = primitive_origin.203
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		generate_early_pre_ftls_on_planet = yes
	}

}


