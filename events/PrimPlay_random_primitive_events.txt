namespace = random_primitive_events


fleet_event = {
	id = random_primitive_events.1
	title = "random_primitive_events.1.title"
	is_triggered_only = yes
	location = root
	picture = GFX_evt_ship_in_orbit
	
	desc = {
		trigger = {
			OWNER = { capital_scope = { NOT = { is_planet_class = pc_nuked } } }
		}
		text = "random_primitive_events.1.desc"
	}
	desc = {
		trigger = {
			OWNER = { capital_scope = { is_planet_class = pc_nuked } }
		} 
		text = "random_primitive_events.1.nuked.desc"
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_gestalt = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_authoritarian = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_egalitarian = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_xenophobe = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_xenophile = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_militarist = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_pacifist = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_spiritualist = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_materialist = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_green = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_industrial = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_socialism = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
	option = {
		name = "random_primitive_events.1.a"	
		trigger = { OWNER = {is_capitalism = yes } }
		#auto_move_to_planet = { target = system.random_system_planet clear_auto_move_on_arrival = yes }
		owner = { add_resource = { unity = 250 } }
	}
}

#Cog Note - using event "colony.100" will trigger the ancient terraforming event chain. But the planet must have an owner.

#Early Chemical Ship Surveys Planet
# A ship has surveyed a planet.
# Scope = Ship
# From = Planet
ship_event = {
	id = random_primitive_events.2
	title = "random_primitive_events.2.title"
	is_triggered_only = yes
	location = from
	picture = GFX_evt_ship_in_orbit
	desc = {
		trigger = { 
			FROM = { 
				is_colonizable = yes #Not Habitable
				NOR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_molten
					is_planet_class = pc_barren 
					is_planet_class = pc_barren_cold
					is_planet_class = toxic_planet
					is_planet_class = pc_frozen
					is_planet_class = pc_nuked
				}
			}
		} 	
		text = "random_primitive_events.2.desc.not_colonizable"
	}
	
	desc = {
		trigger = { 
			FROM = { 
				is_colonizable = yes #Habitable
				NOT = { is_planet_class = pc_nuked }
			}
		}
		text = "random_primitive_events.2.desc.colonizable"
	}
	
	desc = {
		trigger = { FROM = { is_planet_class = pc_gas_giant } }
		text = "random_primitive_events.2.desc.pc_gas_giant"
	}
	
	desc = {	
		trigger = { FROM = { is_planet_class = pc_molten } }
		text = "random_primitive_events.2.desc.pc_molten"
	}
	
	desc = {	
		trigger = { 
			FROM = { 
				OR = {
					is_planet_class = pc_barren 
					is_planet_class = pc_barren_cold
				}
			} 
		}
		text = "random_primitive_events.2.desc.pc_barren"
	}
	
	desc = {
		trigger = { FROM = { is_planet_class = toxic_planet } }
		text = "random_primitive_events.2.desc.toxic_planet"
	}
	
	desc = {
		trigger = { FROM = { is_planet_class = pc_frozen } }
		text = "random_primitive_events.2.desc.pc_frozen"
	}
	
	desc = {
		trigger = { 
			OWNER = { capital_scope = { is_planet_class = pc_nuked } }
			FROM = { is_planet_class = pc_nuked } 
		}
		text = "random_primitive_events.2.desc.home_pc_nuked"
	}
	
	desc = {
		trigger = { 
			NOT = { OWNER = { capital_scope = { is_planet_class = pc_nuked } } }
			FROM = { is_planet_class = pc_nuked } 
		}
		text = "random_primitive_events.2.desc.pc_nuked"
	}
	
	trigger = { 
		has_ship_flag = inteplanetary_flight_fleet
		owner = { any_situation = { is_situation_type = PrimPlayer_situation } }
	}
	
	immediate = { 
		if = {
			limit = { 
				FROM = { 
					OR = {
						is_planet_class = pc_barren 
						is_planet_class = pc_barren_cold
					}
				}
			}
			if = {
				limit = {
					owner = { NOT = { has_country_flag = terraforming_candidate_found } }
					from = {
						solar_system = {
							count_system_planet = {
								count = 0
								limit = { planet_size > 14 }
							}
						}
					}
				}
				from = { set_planet_flag = PrimPlayer_terraforming_candidate }
				hidden_effect = { owner = { set_country_flag = terraforming_candidate_found } }
			}
			else_if = {
				limit = {
					owner = { NOT = { has_country_flag = terraforming_candidate_found } }
					from = { planet_size > 14 }
				}
				from = { set_planet_flag = PrimPlayer_terraforming_candidate }
				hidden_effect = { owner = { set_country_flag = terraforming_candidate_found } }
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.not_colonizable"	#Fallback Generic
		trigger = { 
			FROM = { 
				is_colonizable = yes #Not Habitable
				NOR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_molten
					is_planet_class = pc_barren
					is_planet_class = pc_barren_cold
					is_planet_class = toxic_planet
					is_planet_class = pc_frozen
					is_planet_class = pc_nuked
				}
			}
		} 	
		#add_resource = { unity = 250 }
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.colonizable"
		trigger = { 
			FROM = { 
				is_colonizable = yes #Habitable
				NOT = { is_planet_class = pc_nuked }
			}
		}
		add_resource = { unity = 500 }
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.pc_gas_giant"	
		trigger = { FROM = { is_planet_class = pc_gas_giant } }
		#add_resource = { unity = 250 }
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.pc_molten"	
		trigger = { FROM = { is_planet_class = pc_molten } }
		#add_resource = { unity = 250 }
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.pc_barren"	
		trigger = { 
			FROM = { 
				OR = {
					is_planet_class = pc_barren 
					is_planet_class = pc_barren_cold
				}
			} 
		}
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_resource = { unity = 500 }
		}
		if = {
			limit = {
				from = { has_planet_flag = PrimPlayer_terraforming_candidate }
			}
			from = { add_modifier = { modifier = "terraforming_candidate" days = -1 } }
			hidden_effect = { from = { remove_planet_flag = PrimPlayer_terraforming_candidate } }
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.toxic_planet"	
		trigger = { FROM = { is_planet_class = toxic_planet } }
		#add_resource = { unity = 250 }
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.pc_frozen"	
		trigger = { FROM = { is_planet_class = pc_frozen } }
		#add_resource = { unity = 250 }
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.home_pc_nuked"	
		trigger = { 
			OWNER = { capital_scope = { is_planet_class = pc_nuked } }
			FROM = { is_planet_class = pc_nuked } 
		}
		add_resource = { unity = 500 }
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
	
	option = {
		name = "random_primitive_events.2.option.pc_nuked"	
		trigger = { 
			NOT = { OWNER = { capital_scope = { is_planet_class = pc_nuked } } }
			FROM = { is_planet_class = pc_nuked } 
		}
		add_resource = { unity = 100 }
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

fleet_event = {
	id = random_primitive_events.3
	title = "random_primitive_events.3.title"
	is_triggered_only = yes
	location = root
	picture = GFX_evt_early_space_age
	
	desc = {
		text = "random_primitive_events.3.desc"
	}
	option = {
		name = "random_primitive_events.3.a"	
		owner = { add_resource = { minerals = 1000 } }
		custom_tooltip = random_primitive_events.3.tooltip
		hidden_effect = { owner = { set_country_flag = PrimPlayer_first_orbital_station_is_free } }
	}
}

country_event = {
	id = random_primitive_events.4
	title = "random_primitive_events.4.title"
	is_triggered_only = yes
	#location = from
	picture = GFX_evt_gas_giant_station
	
	desc = {
		text = "random_primitive_events.4.desc"
	}
	
	immediate = { 
		#hidden_effect = {
			capital_scope.solar_system = {
				every_system_planet = {
					limit = { is_capital = no }
					set_surveyed = { surveyed = no surveyor = root }	#Cog Note - For some reason building the star base surveys the whole system... we want it to be unsurveyed!
				}
			}
		#}
	}
	
	option = {
		name = "random_primitive_events.4.a"	
		add_resource = { unity = 500 }
		create_fleet = {
			name = "NAME_Pre_FTL_Chemical_Ship"
			effect = {
				set_owner = prev
				create_ship = {
					name = random
					design = "NAME_Early_Explorer_Vessel"
				}
				set_fleet_flag = inteplanetary_flight_fleet
				set_location = prev.capital_scope
				set_fleet_stance = passive
				last_created_ship = { set_ship_flag = inteplanetary_flight_fleet }
			}
		}
		random_owned_leader = {
			limit = { leader_class = scientist }
			last_created_fleet = { assign_leader = PREV }	#Assigns Scientist to Ship
		}
		hidden_effect = {
			last_created_fleet = { 
				fleet_event = { id = random_primitive_events.1 days = 15 }	#Exploration Mission
			}
		}
		if = {
			limit = { NOT = { has_technology = tech_primitive_generation_ship } }
			add_research_option = tech_primitive_generation_ship 
		}
	}
}
