namespace = action

event = {
	id = action.90
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_playable_country = {
			has_technology = "tech_starbase_1"
			any_owned_planet = {
				solar_system = {
					NOT = {
						exists = starbase
					}
				}
			}
		}
	}

	immediate = {
		every_system = {
			limit = {
				any_planet = {
					is_colony = yes
					exists = owner
					owner = {
						OR = {
							is_country_type = default
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						has_technology = "tech_starbase_1"
					}
					solar_system = {
						NOT = {
							any_ship_in_system = {
								exists = owner
								owner = { NOT = { is_same_value = prevprevprev.owner } }
							}
						}
					}
				}
				NOT = { exists = starbase }
			}
			random_system_planet = {
				limit = {
					is_colony = yes
					exists = owner
					owner = {
						OR = {
							is_country_type = default
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						has_technology = "tech_starbase_1"
					}
				}
				planet_event = { id = action.91 }
			}
		}
	}
}
