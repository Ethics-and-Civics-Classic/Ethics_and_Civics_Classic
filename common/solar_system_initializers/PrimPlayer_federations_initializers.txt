
@distance = 50
@jumps = 3
@planet_min_size = 10
@planet_max_size = 25
@base_moon_distance = 10
@moon_min_size = 6
@moon_max_size = 10
@homeworld_min_size = 18
@homeworld_max_size = 21

# Scion Fallen Empire (if they were turned off in options)
scion_fallen_1 = {
	class = "rl_standard_stars"
	flags = { scion_fe_system }
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		name = "NAME_Great_Nexus"
		orbit_distance = 15
		class = pc_city
		orbit_angle = { min = 90 max = 270 }
		size = 20
		deposit_blockers = none
		modifiers = none
		has_ring = no

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 1 }
			name = "NAME_Wanderer"
			class = pc_barren
			size = 8
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}

		init_effect = {
			create_cluster = {
				id = scion_fe1_cluster
				radius = 120
				center = this.solar_system
			}
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				extra_trait_points = 3
				allow_negative_traits = no
			}
			create_country = {
				name = random
				type = fallen_empire
				ignore_initial_colony_error = yes
				authority = auth_imperial
				civics = {
					civic = civic_lethargic_leadership
					civic = civic_empire_in_decline
				}
				species = last_created_species
				ethos = {
					ethic = ethic_fanatic_materialist
				}
				flag = random
				origin = "origin_fallen_empire"
				effect = {
					set_country_flag = fallen_empire_1
					set_graphical_culture = fallen_empire_02
					save_event_target_as = scion_fe
					add_resource = {
						minerals = 10000
						energy = 10000
						food = 1000
						influence = 500
					}
					# must initialize global designs here
					add_global_ship_design = "NAME_Enforcer"
					add_global_ship_design = "NAME_Savant"
					add_global_ship_design = "NAME_Scholar"
					add_global_ship_design = "NAME_Sage"
					add_global_ship_design = "NAME_Cloaker"
					add_global_ship_design = "NAME_Librarian"
					add_global_ship_design = "NAME_Seeker"
					add_global_ship_design = "NAME_FE_Starbase"
				}
			}
			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = event_target:scion_fe
			set_controller = event_target:scion_fe
			set_capital = yes

			# See planet set up in common\solar_system_initializers\fallen_empire_initializers.txt
			while = {
				count = 10
				add_district = district_arcology_housing
			}
			add_zone = {
				district = district_arcology_housing
				zone = zone_urban
			}
			add_zone = {
				district = district_arcology_housing
				zone = zone_urban
			}
			while = {
				count = 3
				add_district = district_arcology_urban_1
			}
			add_zone = {
				district = district_arcology_urban_1
				zone = zone_research_physics
			}
			while = {
				count = 3
				add_district = district_arcology_urban_2
			}
			add_zone = {
				district = district_arcology_urban_2
				zone = zone_research_engineering
			}
			while = {
				count = 3
				add_district = district_arcology_urban_3
			}
			add_zone = {
				district = district_arcology_urban_3
				zone = zone_research_society
			}
			while = {
				count = 94
				create_pop_group = {
					species = owner_main_species
				}
			}
			event_target:scion_fe = {
				set_policy = {
					policy = artificial_intelligence_policy
					option = ai_servitude
					cooldown = no
				}
				set_policy = {
					policy = robot_pop_policy
					option = robot_pops_allowed
					cooldown = no
				}
				random_playable_country = {
					limit = {
						has_origin = origin_scion
						has_country_flag = scion_needs_fe
					}
					remove_country_flag = scion_needs_fe
					save_event_target_as = scion_vassal
				}
				every_playable_country = {
					limit = {
						has_civic = PrimPlayer_civic_scion_materialist
						has_country_flag = scion_needs_fe
					}
					remove_country_flag = scion_needs_fe
					save_event_target_as = scion_vassal
				}
				set_country_flag = scion_master
				save_event_target_as = scion_master
				add_opinion_modifier = {
					who = event_target:scion_vassal
					modifier = opinion_scion
				}
				country_event = { id = origin.20 days = 9000 random = 9000 }
				event_target:scion_vassal = {
					establish_communications_no_message = event_target:scion_fe
					set_subject_of = {
						who = event_target:scion_fe
						preset = preset_scion
					}
					add_opinion_modifier = {
						who = event_target:scion_fe
						modifier = opinion_scion
					}
					country_event = { id = origin.10 days = 3 }
				}
			}
			event_target:scion_fe = { create_fe_servant_robots = yes }
			last_created_species = { save_event_target_as = fe_servants }
			while = {
				count = 94
				create_pop_group = {
					species = event_target:fe_servants
				}
			}
			create_fallen_empire_starting_navy = yes
			while = {
				count = 20
				create_army = {
					name = random
					owner = event_target:scion_fe
					species = event_target:scion_fe
					type = "robotic_army"
				}
			}
		}
	}


	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 25
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}
	}


	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 35
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 2 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}
	}

	init_effect = {
		create_starbase = {
			size = "starbase_citadel"
			owner = event_target:scion_fe

			module = "shipyard"
			module = "shipyard"
			module = "shipyard"
			module = "hangar_bay"
			module = "gun_battery"
			module = "gun_battery"

			building = "target_uplink_computer"
			building = "defense_grid"
			building = "colossus_yards"
			building = "titan_yards"

			effect = {
				while = {
					count = 10
					create_fallen_empire_platform = yes
				}
			}
		}
	}
}

scion_fallen_2 = {
	class = "rl_standard_stars"
	flags = { scion_fe_system }
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		name = "NAME_Celestial_Throne"
		orbit_distance = 20
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 30
		deposit_blockers = none
		modifiers = none

		init_effect = {
			create_cluster = {
				id = scion_fe2_cluster
				radius = 140
				center = this.solar_system
			}
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				extra_trait_points = 3
				allow_negative_traits = no
			}
			create_country = {
				name = random
				type = fallen_empire
				ignore_initial_colony_error = yes
				authority = auth_imperial
				civics = {
					civic = civic_lethargic_leadership
					civic = civic_empire_in_decline
				}
				species = last_created_species
				ethos = {
					ethic = ethic_fanatic_spiritualist
				}
				flag = random
				origin = "origin_fallen_empire"
				effect = {
					set_country_flag = fallen_empire_2
					set_graphical_culture = fallen_empire_01
					save_event_target_as = scion_fe
					add_resource = {
						minerals = 10000
						energy = 10000
						food = 1000
						influence = 500
					}
					# must initialize global designs here
					add_global_ship_design = "NAME_Cleanser"
					add_global_ship_design = "NAME_Eternal"
					add_global_ship_design = "NAME_Avatar"
					add_global_ship_design = "NAME_Zealot"
					add_global_ship_design = "NAME_Penitent"
					add_global_ship_design = "NAME_Faith"
					add_global_ship_design = "NAME_Pilgrim"
					add_global_ship_design = "NAME_FE_Starbase"
				}
			}


			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = event_target:scion_fe
			set_controller = event_target:scion_fe
			set_capital = yes

			# See planet set up in common\solar_system_initializers\fallen_empire_initializers.txt
			while = {
				count = 16
				add_district = district_city
			}
			while = {
				count = 2
				add_district_and_planet_size_if_needed_effect = {
					district = district_generator
				}
			}
			add_zone = {
				district = district_generator
				zone = zone_energy
			}
			while = {
				count = 6
				add_district_and_planet_size_if_needed_effect = {
					district = district_mining
				}
			}
			add_zone = {
				district = district_mining
				zone = zone_minerals
			}
			while = {
				count = 6
				add_district_and_planet_size_if_needed_effect = {
					district = district_farming
				}
			}
			add_zone = {
				district = district_farming
				zone = zone_food
			}
			add_building = building_ancient_palace
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_fe_temple_2
			add_building = building_fe_temple_2
			add_building = building_fe_mine_2
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_dimensional_fabricator
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = building_affluence_center
			add_building = building_nano_forge
			while = {
				count = 115
				create_pop_group = {
					species = owner_main_species
				}
			}
			create_fallen_empire_starting_navy = yes
			while = {
				count = 20
				create_army = {
					name = random
					owner = event_target:scion_fe
					species = event_target:scion_fe
					type = "psionic_army"
				}
			}
			random_playable_country = {
				limit = {
					has_origin = origin_scion
					has_country_flag = scion_needs_fe
				}
				remove_country_flag = scion_needs_fe
				save_event_target_as = scion_vassal
			}
			every_playable_country = {
				limit = {
					has_civic = PrimPlayer_civic_scion_spiritualist
					has_country_flag = scion_needs_fe
				}
				remove_country_flag = scion_needs_fe
				save_event_target_as = scion_vassal
			}
			event_target:scion_fe = {
				set_country_flag = scion_master
				save_event_target_as = scion_master
				add_opinion_modifier = {
					who = event_target:scion_vassal
					modifier = opinion_scion
				}
				country_event = { id = origin.20 days = 9000 random = 9000 }
			}
			event_target:scion_vassal = {
				establish_communications_no_message = event_target:scion_fe
				set_subject_of = {
					who = event_target:scion_fe
					preset = preset_scion
				}
				add_opinion_modifier = {
					who = event_target:scion_fe
					modifier = opinion_scion
				}
				country_event = { id = origin.10 days = 3 }
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			name = "NAME_The_Mistake"
			class = "pc_broken"
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
			modifiers = none

			init_effect = { prevent_anomaly = yes }
		}
	}

	planet = {
		name = "NAME_Sky_Temple"
		orbit_distance = 30
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 22
		deposit_blockers = none
		modifiers = none

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = event_target:scion_fe
			set_controller = event_target:scion_fe

			# See planet set up in common\solar_system_initializers\fallen_empire_initializers.txt
			while = {
				count = 12
				add_district = district_city
			}
			while = {
				count = 2
				add_district_and_planet_size_if_needed_effect = {
					district = district_generator
				}
			}
			add_zone = {
				district = district_generator
				zone = zone_energy
			}
			while = {
				count = 5
				add_district_and_planet_size_if_needed_effect = {
					district = district_mining
				}
			}
			add_zone = {
				district = district_mining
				zone = zone_minerals
			}
			while = {
				count = 5
				add_district_and_planet_size_if_needed_effect = {
					district = district_farming
				}
			}
			add_zone = {
				district = district_farming
				zone = zone_food
			}
			while = {
				count = 68
				create_pop_group = {
					species = owner_main_species
				}
			}
			add_building = building_ancient_palace
			add_building = building_empyrean_shrine
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_dimensional_fabricator
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = building_nano_forge
			add_building = building_nano_forge
			while = {
				count = 68
				create_pop_group = {
					species = owner_main_species
				}
			}
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		create_starbase = {
			size = "starbase_citadel"
			owner = event_target:scion_fe

			module = "shipyard"
			module = "shipyard"
			module = "shipyard"
			module = "hangar_bay"
			module = "gun_battery"
			module = "gun_battery"

			building = "target_uplink_computer"
			building = "defense_grid"
			building = "colossus_yards"
			building = "titan_yards"

			effect = {
				while = {
					count = 10
					create_fallen_empire_platform = yes
				}
			}
		}
	}
}