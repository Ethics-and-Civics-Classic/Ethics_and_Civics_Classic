
building_colosseum = {
	base_buildtime = 480
	planet_limit = 1

	category = amenity

	building_sets = {
		entertainment
		urban
		trade
		fortress
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				has_civic = civic_slaver_guilds
				has_civic = civic_barbaric_despoilers			# Cog Note - This civic is an upgrade of Slaver Guilds
				has_civic = civic_barbaric_despoilers_corporate	# Cog Note - This civic is an upgrade of Slaver Guilds
				has_civic = civic_divine_order
			}
		}
	}

	allow = {
		OR = {
			has_upgraded_capital = yes
			hidden_trigger = {
				OR = {
					has_building =building_primitive_capital
					has_building =building_machine_primitive_capital
					has_building =building_hive_primitive_capital

				}
			}
		}
		OR = { 
			has_building = building_slave_processing
			custom_tooltip = {
				text = civic_tooltip_civic_barbaric_despoilers	# Cog Note - This society does not need a processing facility for gladiators
				owner = {
					OR = {
						has_civic = civic_barbaric_despoilers			
						has_civic = civic_barbaric_despoilers_corporate	
					}
				}
			}
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			AND = {		#If you have one of the civics, this gets deleted only if slavery is banned
				owner = { has_policy_flag = slavery_not_allowed }
				OR = {
					owner = { has_valid_civic = civic_slaver_guilds }
					owner = { has_valid_civic = civic_barbaric_despoilers }				# Cog Note - This civic is an upgrade of Slaver Guilds
					owner = { has_valid_civic = civic_barbaric_despoilers_corporate }	# Cog Note - This civic is an upgrade of Slaver Guilds
					owner = { has_valid_civic = civic_divine_order }
				}
			}
			AND = {		#If you DON'T have one of the civics, this gets deleted if you don't have a slave processing building
				NOT = { has_building = building_slave_processing }	
				NOR = {
					owner = { has_valid_civic = civic_slaver_guilds }
					owner = { has_valid_civic = civic_barbaric_despoilers }				# Cog Note - This civic is an upgrade of Slaver Guilds
					owner = { has_valid_civic = civic_barbaric_despoilers_corporate }	# Cog Note - This civic is an upgrade of Slaver Guilds
					owner = { has_valid_civic = civic_divine_order }
				}
			}
		}
	}
	planet_modifier = {
		pop_cat_ruler_happiness = 0.15
		pop_cat_specialist_happiness = 0.05
		pop_cat_worker_happiness = 0.10
		planet_housing_add = 200
		# planet_jobs_trade_produces_add = 15 #Steam: This adds a flat 15 trade to planet production, changed to a gladiator buff
		job_gladiator_add = 200
		planet_gladiators_trade_produces_add = 7.5
	}

	army_modifier = {
		army_damage_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_civic = civic_warrior_culture	# Cog Note - This makes sense
			}
		}
		modifier = {
			job_gladiator_add = 100
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 50
		}
		upkeep = {
			energy = 2
		}
	}

	#triggered_desc = {
	#	text = job_gladiator_effect_desc
	#}

	ai_weight = {
		weight = 1000
	}

	on_built = {
		planet = {
			owner = { set_timed_country_flag = { flag = buildings_new_alloys_building months = 16 } }
		}
	}
}

#############
# Permanent Employment Building
#############

building_posthumous_employment_center = {
	base_buildtime = @b1_time
	planet_limit = 1

	category = pop_assembly

	building_sets = {
		government
		urban
	}

	potential = {
		exists = owner
		OR = {
			owner = {
				is_ai = no
			}
			NOT = { exists = assembling_species }
			assembling_species = { is_organic_species = yes }
		}
		OR = {
			owner = { is_ai = no }
			NAND = {
				free_district_slots = 0
				free_building_slots <= 1
				free_housing <= 0
				free_jobs <= 0
			}
		}
		owner = {
			is_regular_empire = yes
			has_valid_civic = civic_permanent_employment
		}
	}

	allow = {
		OR = {
			has_upgraded_capital = yes
			hidden_trigger = {
				OR = {
					has_building =building_primitive_capital
					has_building =building_machine_primitive_capital
					has_building =building_hive_primitive_capital

				}
			}
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				NOT = { has_valid_civic = civic_permanent_employment }
			}
			AND = {
				owner = { is_ai = yes }
				free_district_slots = 0
				free_building_slots = 0
				free_housing <= 0
				free_jobs <= 0
			}
		}
	}

	planet_modifier = {
		job_reassigner_add = 100
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}
}



#####################
# Galactic Paragons Buildings
#####################

building_paragon_memory_vaults = {
	base_buildtime = @b2_time
	planet_limit = 1
	category = unity
	can_demolish = no
	can_be_ruined = yes
	can_be_disabled = no
	is_essential = yes
	
	empire_limit = 1
	
	building_sets = {
		government
		urban
		unity
	}
	
	destroy_trigger = {
		exists = owner
		owner = {
			is_memory_vault_empire = no
		}
	}
	desc = {
		trigger = {
			exists = owner
			owner = {
				OR = {
					has_civic = civic_memory_vault
					has_civic = civic_memory_vault_corporate
				}
			}
		}
		text = building_paragon_memory_vaults_desc
	}
	desc = {
		trigger = {
			exists = owner
			owner = { has_civic = civic_memory_vault_machine }
		}
		text = building_paragon_memory_vaults_machine_desc
	}
	desc = {
		trigger = {
			exists = owner
			owner = { has_civic = civic_memory_vault_hive }
		}
		text = building_paragon_memory_vaults_hive_desc
	}
	
	allow = {
		OR = {
			has_upgraded_capital = yes
			hidden_trigger = {
				OR = {
					has_building =building_primitive_capital
					has_building =building_machine_primitive_capital
					has_building =building_hive_primitive_capital

				}
			}
		}
		hidden_trigger = {
			owner = {
				OR = {
					is_ai = no
					resource_stockpile_compare = { resource = minerals value >= 800 }
				}
			}
		}
	}

	potential = {
		custom_tooltip = {
			text = EMPIRE_UNIQUE_BUILDING
			owner = { is_memory_vault_empire = yes }
		}
		exists = planet
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}

		cost = {
			trigger = {
				exists = owner
				owner = {
					is_wilderness_empire = yes
				}
			}
			biomass = 200
		}

		produces = {
			trigger = {
				exists = owner
			}
			unity = 5
		}
		produces = {
			trigger = {
				exists = owner
				planet = { is_variable_set = paragon_memory_vault }
			}
			unity = 5
			multiplier = planet.paragon_memory_vault
		}
		produces = {
			trigger = {
				exists = owner
				owner = { has_civic = civic_memory_vault_corporate }
				planet = { is_variable_set = paragon_memory_vault }
			}
			trade = 10
		}
		produces = {
			trigger = {
				exists = owner
				owner = { has_civic = civic_memory_vault_corporate }
				planet = { is_variable_set = paragon_memory_vault }
			}
			trade = 10
			multiplier = planet.paragon_memory_vault
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	triggered_country_modifier = {
		potential = {
			exists = owner
			owner = {
				OR = {
					has_civic = civic_memory_vault
					has_civic = civic_memory_vault_machine
					has_civic = civic_memory_vault_hive
				}
			}
		}
		species_leader_exp_gain = 0.01
	}
	triggered_country_modifier = {
		potential = {
			exists = owner
			owner = {
				OR = {
					has_civic = civic_memory_vault
					has_civic = civic_memory_vault_machine
					has_civic = civic_memory_vault_hive
				}
			}
			planet = { is_variable_set = paragon_memory_vault }
		}
		species_leader_exp_gain = 0.01
		mult = planet.paragon_memory_vault
	}

	inline_script = {
		script = buildings/on_all_wilderness_buildings_districts
	}
	#triggered_desc = {
	#	text = EaC_civic_mechanic_events.103.building.modifier_tooltip_warning
	#}

	on_built = {
		set_variable = {
			which = paragon_memory_vault
			value = 0
		}
	}

	on_destroy = {
		clear_variable = paragon_memory_vault
	}
}
